# üî¥ –°–†–û–ß–ù–û: –†–µ—à–µ–Ω–∏–µ 500 –æ—à–∏–±–∫–∏

## ‚ùó –ü—Ä–æ–±–ª–µ–º–∞

`X-Vercel-Error: FUNCTION_INVOCATION_FAILED` –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è —É–ø–∞–ª–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏.

**–°–∞–º–∞—è –≤–µ—Ä–æ—è—Ç–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `DATABASE_URL` –≤ Vercel

## ‚úÖ –†–ï–®–ï–ù–ò–ï (–ø–æ—à–∞–≥–æ–≤–æ)

### –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π DATABASE_URL

1. –û—Ç–∫—Ä–æ–π—Ç–µ [Supabase Dashboard](https://app.supabase.com)
2. –í–∞—à –ø—Ä–æ–µ–∫—Ç `rrisqutxlkamwfhcashl`
3. **Settings** ‚Üí **Database**
4. –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç–µ –¥–æ **Connection Pooling**
5. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º **Transaction**
6. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Connection String

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç

Connection String –¥–æ–ª–∂–µ–Ω –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:
```
postgresql://postgres.rrisqutxlkamwfhcashl:[PASSWORD]@aws-0-us-west-2.pooler.supabase.com:6543/postgres?pgbouncer=true
```

**–í–∞–∂–Ω–æ:**
- ‚úÖ Username: `postgres.rrisqutxlkamwfhcashl` (–ù–ï –ø—Ä–æ—Å—Ç–æ `postgres`)
- ‚úÖ –ü–æ—Ä—Ç: **6543** (–ù–ï 5432)
- ‚úÖ Host: `aws-0-...pooler.supabase.com` (—Å `pooler` –≤ –∏–º–µ–Ω–∏)
- ‚úÖ –í –∫–æ–Ω—Ü–µ: `?pgbouncer=true`

### –®–∞–≥ 3: –û–±–Ω–æ–≤–∏—Ç—å –≤ Vercel

1. [Vercel Dashboard](https://vercel.com)
2. –ü—Ä–æ–µ–∫—Ç `biblie-school-backend`
3. **Settings** ‚Üí **Environment Variables**
4. –ù–∞–π–¥–∏—Ç–µ `DATABASE_URL`
5. **–£–î–ê–õ–ò–¢–ï** —Å—Ç–∞—Ä—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
6. **–°–û–ó–î–ê–ô–¢–ï** –Ω–æ–≤—É—é —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º Connection Pooling string
7. **–í—ã–±–µ—Ä–∏—Ç–µ –í–°–ï –æ–∫—Ä—É–∂–µ–Ω–∏—è:** Production, Preview, Development
8. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ**

### –®–∞–≥ 4: –ü–µ—Ä–µ–¥–µ–ø–ª–æ–∏—Ç—å

–ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π:
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Deployments**
2. –ù–∞–π–¥–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π
3. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ **...** (—Ç—Ä–∏ —Ç–æ—á–∫–∏)
4. –í—ã–±–µ—Ä–∏—Ç–µ **Redeploy**
5. –ü–æ–¥–æ–∂–¥–∏—Ç–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–µ–ø–ª–æ—è

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
```
https://biblie-school-backend.vercel.app/api/v1/health/db
```

–î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å:
```json
{
  "status": "ok",
  "database": "connected",
  "users_table_exists": true
}
```

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É - —Å–º–æ—Ç—Ä–∏—Ç–µ –¥–µ—Ç–∞–ª–∏ –≤ –æ—Ç–≤–µ—Ç–µ.

## üìã –ß–µ–∫-–ª–∏—Å—Ç

- [ ] DATABASE_URL –∏–∑ Connection Pooling (—Ä–µ–∂–∏–º Transaction)
- [ ] Username = `postgres.rrisqutxlkamwfhcashl`
- [ ] –ü–æ—Ä—Ç = 6543
- [ ] –í –∫–æ–Ω—Ü–µ —Å—Ç—Ä–æ–∫–∏ –µ—Å—Ç—å `?pgbouncer=true`
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –≤–æ –í–°–ï–• –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö
- [ ] –ü—Ä–æ–µ–∫—Ç –ø–µ—Ä–µ–¥–µ–ø–ª–æ–µ–Ω

## üÜò –ï—Å–ª–∏ –Ω–µ –ø–æ–º–æ–≥–ª–æ

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Vercel:
1. Vercel Dashboard ‚Üí –≤–∞—à backend –ø—Ä–æ–µ–∫—Ç
2. **Deployments** ‚Üí –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π
3. **Functions** ‚Üí **Logs**

–¢–∞–º –±—É–¥–µ—Ç —Ç–æ—á–Ω–∞—è –æ—à–∏–±–∫–∞!

